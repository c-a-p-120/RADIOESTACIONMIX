<meta content='width=device-width, initial-scale=1' name='viewport'/>
<link href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css' rel='stylesheet'/>
<script src='https://code.jquery.com/jquery-3.6.4.min.js'></script>

<style>
body {margin:0px;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji"}
.repro {width:100%;display:inline-block}
#player {float:left;height:44px;width:35%;padding:13px 10px;overflow:hidden;background-color:#68FF33;color:#F6FF33}
.play-pause {float:left;}
.play-pause span{margin-top:2px;font-size:40px;cursor:pointer;}
.volume-control {margin-left:50px;}
.fa-volume-up {font-size:20px}
/* Chrome */
input[type=range] {-webkit-appearance:none;background:transparent;}
input[type=range]:focus {outline:none;}
input[type=range]::-webkit-slider-runnable-track {margin-top:-15px;height:5px;cursor:pointer;animate:0.2s;box-shadow:0px 0px 0px #00FFFF , 0px 0px 0px #00FFFF ;background:#00FFFF ;}
input[type=range]::-webkit-slider-thumb {box-shadow:0px 0px 0px #00FFFF, 0px 0px 0px #00FFFF ;height:20px;width:20px;border-radius:50%;background:#00FFFF;cursor:pointer;-webkit-appearance:none;margin-top:-8px;}
#metadata {color:#00FFFF;display:flex;height:70px;background-color:#F6FF33;font-size:25px;font-weight:bold;text-transform:uppercase;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}
.meta-img {background-color:#00FFFF;width:70px;height:70px;margin-right:5px;}
marquee {margin-top:15px;}

@media screen and (min-width: 100px) and (max-width: 479px)  {
#player {width:100%}
#metadata {float:left;width:100%}
} 
</style>

<script>
get = window.location.search;
id = get.replace("?id=", "");

stream = "https://stream.zeno.fm/"+id;
server = "jalador.php?id="+id;
</script>


<div class="repro">
<div id="player"></div>
<div id="metadata"></div>
</div>




<script>
//Reproductor
$("#player").html('<div class="play-pause"><span id="playerButton" class="fa fa-play" onclick="togglePlay()"></span></div><div class="volume-control"><div id="volIndicator">Cargando...</div><span class="fa fa-volume-up"></span><input type="range" id="volume" step="1" min="0" max="100" value="100"></div>');


function Page(){this.changeVolumeIndicator=function(e){document.getElementById("volIndicator").innerHTML="Volumen "+e+" %","undefined"!=typeof Storage&&localStorage.setItem("volume",e)},this.setVolume=function(){if("undefined"!=typeof Storage){var e=localStorage.getItem("volume")?localStorage.getItem("volume"):100;document.getElementById("volume").value=e,document.getElementById("volIndicator").innerHTML="Volumen-y "+e+" %"}}}window.onload=function(){(new Page).setVolume(),(new Player).play()};var audio=new Audio(stream);function Player(){this.play=function(){audio.play();var e=document.getElementById("volume").value;"undefined"!=typeof Storage&&null!==localStorage.getItem("volume")?audio.volume=intToDecimal(localStorage.getItem("volume")):audio.volume=intToDecimal(e),document.getElementById("volIndicator").innerHTML="Volumen "+e+" %"},this.pause=function(){audio.pause()}}function togglePlay(){audio.paused?(audio.load(),audio.play()):audio.pause()}function volumeUp(){var e=audio.volume;audio&&audio.volume>=0&&audio.volume<1&&(audio.volume=(e+.01).toFixed(2))}function volumeDown(){var e=audio.volume;audio&&audio.volume>=.01&&audio.volume<=1&&(audio.volume=(e-.01).toFixed(2))}function mute(){if(audio.muted){var e=localStorage.getItem("volume");document.getElementById("volIndicator").innerHTML="Volumen-x "+e+" %",document.getElementById("volume").value=e,audio.volume=intToDecimal(e),audio.muted=!1}else document.getElementById("volIndicator").innerHTML=0,document.getElementById("volume").value=0,audio.volume=0,audio.muted=!0}function intToDecimal(e){return e/100}function decimalToInt(e){return 100*e}audio.onplay=function(){var e=document.getElementById("playerButton"),o=document.getElementById("buttonPlay");"fa fa-play"===e.className&&(e.className="fa fa-pause"/*,o.firstChild.data="PAUSA"*/)},audio.onpause=function(){var e=document.getElementById("playerButton"),o=document.getElementById("buttonPlay");"fa fa-pause"===e.className&&(e.className="fa fa-play"/*,o.firstChild.data="PLAY"*/)},audio.onvolumechange=function(){audio.volume>0&&(audio.muted=!1)},audio.onerror=function(){confirm("ESTA RADIO ESTÃ EN MANTENIMIENTO O FUERA DE SERVICIO")/*&&window.location.reload()*/},document.getElementById("volume").oninput=function(){audio.volume=intToDecimal(this.value),(new Page).changeVolumeIndicator(this.value)};
</script>

<script>
//METADATA
$("#metadata").html('<img class="meta-img" src="https://i.imgur.com/JbRBiZC.png" id="portada"/><marquee><span id="cancion">Radio en VIVO</span></marquee>');

function metadata() {
jQuery.ajax ({ url:server+"?ra="+Math.random(), type:"GET", dataType:"text", crossDomain:!0, async:true, success:function(data) 
{
xtit = data;
myArray = xtit.split(" - ");
portadax(myArray[0]);
  
$("#cancion").text(xtit);
}
});
}
setTimeout(function(){metadata();}, 1000);
setInterval(function(){metadata();}, 60000); 


// busqueda portada
function portadax(name) {
url = "https://itunes.apple.com/search?term=="+name+"&media=music&limit=1";
$.getJSON (url, function (datax) {
imx = datax.results[0].artworkUrl100;
//portada = imx.replace("100x100bb", "1500x1500bb");
$("#portada").attr('src', imx);
});
}
</script>
